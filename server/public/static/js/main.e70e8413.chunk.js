(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){},102:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(20),c=a.n(i),l=(a(48),a(6)),s=a(1),u=a(2),o=a(4),m=a(3),d=a(5),h=(a(49),a(13)),f=a(15),p=a(7),v=a(18),b=a.n(v),g=function e(){var t=this;Object(s.a)(this,e),this.all=function(){return t.service.get("/").then(function(e){return e.data})},this.circuitsWithUSer=function(e){return t.service.get("/creator/".concat(e)).then(function(e){return e.data})},this.oneData=function(e){return t.service.get("/".concat(e)).then(function(e){return e.data})},this.newOne=function(e){return t.service.post("/new",e)},this.updateOne=function(e,a){return t.service.put("/update/".concat(e),a)},this.deleteOne=function(e){return t.service.delete("/delete/".concat(e))},this.service=b.a.create({baseURL:"".concat("https://nomada-travel.herokuapp.com/api","/travels"),withCredentials:!0})},E=(a(30),a(69),function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"searchBox"},r.a.createElement("input",{className:"search",type:"text",name:"title",placeholder:"Find a Circuit",autoComplete:"off",onChange:function(t){return e.props.search(t.target.value)}}))}}]),t}(n.Component)),C=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).travelService=new g,a.state={allCircuits:[],filteredCircuits:[]},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getAllCircuits",value:function(){var e=this;this.travelService.all().then(function(t){e.setState(Object(l.a)({},e.state,{allCircuits:t,filteredCircuits:t}))})}},{key:"getUserCircuits",value:function(e){var t=this;this.travelService.circuitsWithUSer(e).then(function(e){t.setState(Object(l.a)({},t.state,{allCircuits:e,filteredCircuits:e}))})}},{key:"componentDidMount",value:function(){this.props.id?this.getUserCircuits(this.props.id):this.getAllCircuits()}},{key:"filterCircuit",value:function(e){var t=Object(f.a)(this.state.filteredCircuits);0===e.length||0===t.length?this.setState(Object(l.a)({},this.state,{filteredCircuits:this.state.allCircuits})):this.setState(Object(l.a)({},this.state,{filteredCircuits:t.filter(function(t){return t.title.toLowerCase().includes(e.toLowerCase())})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(E,{search:function(t){return e.filterCircuit(t)}})),r.a.createElement("div",{className:"boxMovie  "},this.state.filteredCircuits.map(function(e,t){return r.a.createElement("div",{key:t,className:"card",style:{width:280}},r.a.createElement("div",null,r.a.createElement("img",{alt:"",className:"card-img-top",src:e.image_url})),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title text-center"}," ",e.title),r.a.createElement(p.b,{id:"btn",className:"btn btn-secondary",to:"/circuit/".concat(e._id)},"Circuit")))})),r.a.createElement("div",{className:"d-flex inputContainer"},r.a.createElement(p.b,{to:"/new"},r.a.createElement("input",{id:"btnCreate",className:"btn btn-dark ",type:"submit",value:"Create"})),r.a.createElement("input",{id:"btnCreate2",className:"btn btn-dark ",type:"submit",value:"Delete"})))}}]),t}(n.Component),O=(a(78),function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement(p.b,{to:"/allCircuits"},r.a.createElement("h2",null,"Nomada Travel")),r.a.createElement("div",{id:"nav",className:"navbar-burger burger","data-target":"navbarExampleTransparentExample"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null))),r.a.createElement("div",{className:"navbar-menu"},r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{className:"navbar-item"},r.a.createElement(p.b,{to:"/"},r.a.createElement("img",{src:"",alt:""}),r.a.createElement("button",{onClick:this.props.logoutFunction,className:"btn btn-outline-light"},"Logout"))))))}}]),t}(n.Component)),j=a(14),N=function e(){var t=this;Object(s.a)(this,e),this.signup=function(e,a,n){return t.service.post("/signup",{username:e,password:a,email:n}).then(function(e){return e.data})},this.login=function(e,a){return t.service.post("/login",{username:e,password:a}).then(function(e){return e.data})},this.loggedin=function(){return t.service.get("/currentUser").then(function(e){return e.data})},this.logout=function(){return t.service.get("/logout").then(function(e){return e.data})},this.oneData=function(e){return t.service.get("/user/".concat(e)).then(function(e){return e.data})},this.service=b.a.create({baseURL:"".concat("https://nomada-travel.herokuapp.com/api","/auth"),withCredentials:!0})},y=(a(32),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password,r=a.state.email;a.service.signup(t,n,r).then(function(e){a.setState(Object(l.a)({},a.state,{username:"",password:"",email:""}),function(){a.props.getUser(e.user)})}).catch(function(e){})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(j.a)({},n,r))},a.state={username:"",password:"",email:""},a.service=new N,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,null),r.a.createElement("div",{className:"big-container"},r.a.createElement("div",{className:"small-container"},r.a.createElement("h4",null,"Have an account?.."),r.a.createElement(p.b,{to:"/login"},r.a.createElement("button",{id:"btn-left",className:"btn btn-outline-light"},"Login"))),r.a.createElement("div",{className:"form-container"},r.a.createElement("form",{className:"form-group",onSubmit:function(t){return e.handleFormSubmit(t)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("fieldset",null,r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",className:"form-control",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("fieldset",null,r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("fieldset",null,r.a.createElement("label",null,"Email:"),r.a.createElement("input",{type:"email",className:"form-control",name:"email",value:this.state.email,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("input",{className:"btn btn-outline-secondary ",type:"submit",id:"left",value:"Sign up"})),r.a.createElement("h1",null,this.state.error?"Error":""))))}}]),t}(n.Component)),w=Object(h.f)(y),S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password;a.service.login(t,n).then(function(e){a.setState({username:t,password:n},function(){a.props.getUser(e),a.props.history.push("/allCircuits")})}).catch(function(e){})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(j.a)({},n,r))},a.state={username:"",password:"",error:""},a.service=new N,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,null),r.a.createElement("div",{className:"big-container"},r.a.createElement("div",{className:"small-container"},r.a.createElement("h4",null,"Dont have account?.."),r.a.createElement(p.b,{to:"/signup"},r.a.createElement("button",{id:"btn-left",className:"btn btn-outline-light"}," Signup"))),r.a.createElement("div",{className:"form-container"},r.a.createElement("form",{className:"form-group",onSubmit:function(t){return e.handleFormSubmit(t)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("fieldset",null,r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",className:"form-control",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("fieldset",null,r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("input",{id:"left",className:"btn btn-outline-secondary",type:"submit",value:"Login"})),r.a.createElement("h1",null,this.state.error?"Error":""))))}}]),t}(n.Component),k=Object(h.f)(S),U=(a(79),a(42)),x=a.n(U),D=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"setMapProperties",value:function(e,t){var a=this.props.coords.length,n=this.props.coords[0],r=this.props.coords[a-1],i=null;a>2&&(i=Object(f.a)(this.props.coords).splice(1,a-2).map(function(e){return{location:{lat:e.latitude,lng:e.longitude},stopover:!0}}));var c=new t.DirectionsService,l=new t.DirectionsRenderer,s={origin:{lat:n.latitude,lng:n.longitude},destination:{lat:r.latitude,lng:r.longitude},waypoints:i,travelMode:"DRIVING"};c.route(s,function(e,t){"OK"===t?l.setDirections(e):window.alert("Directions request failed due to: "+t)}),l.setMap(e)}},{key:"render",value:function(){var e=this,t={center:{lat:59.59,lng:14},zoom:1};return r.a.createElement("div",{style:{height:"100%",width:"100%"}},r.a.createElement(x.a,{bootstrapURLKeys:{key:"AIzaSyCX_aQdF5ZCgOMtJYwiw8-94rxPxvJQBic"},defaultCenter:t.center,defaultZoom:t.zoom,onGoogleApiLoaded:function(t){var a=t.map,n=t.maps;return e.setMapProperties(a,n)}}))}}]),t}(n.Component),I=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).travelService=new g,a.state={oneCircuit:null},a.getOneCircuit(),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getOneCircuit",value:function(){var e=this,t=this.props.match.params.id;this.travelService.oneData(t).then(function(t){e.setState(Object(l.a)({},e.state,{oneCircuit:t}),function(){})})}},{key:"render",value:function(){return null===this.state.oneCircuit?r.a.createElement("div",null,r.a.createElement("h1",null,"LOADING...")):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"searchBar"}),r.a.createElement("h1",{className:"text-center mr-md-6"},this.state.oneCircuit.title),r.a.createElement("div",{className:"circuit d-flex  flex-wrap"},r.a.createElement("div",{className:"containerCircuit d-flex flex-column"},r.a.createElement("div",{className:"imgCircuit"},r.a.createElement("img",{alt:"",src:this.state.oneCircuit.image_url})),r.a.createElement("div",{className:"mapCircuit "},r.a.createElement(D,{coords:this.state.oneCircuit.coords}))),r.a.createElement("div",{className:"descriptionCircuit"},r.a.createElement("p",null,this.state.oneCircuit.descriptions)),r.a.createElement("div",{className:"authorInfo"},r.a.createElement("img",{alt:"",src:this.state.oneCircuit.creator_id.img}),r.a.createElement("h4",null,"Este circuito fue creado por:",r.a.createElement(p.b,{to:"/creator/".concat(this.state.oneCircuit.creator_id._id)},r.a.createElement("span",{className:"creatorId"}," ",this.state.oneCircuit.creator_id.username))))))}}]),t}(n.Component),_=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar  fluid-container navbar-light  d-flex justify-content-end"},r.a.createElement(p.b,{to:"/login"},r.a.createElement("button",{type:"button",className:"btn btn-outline-light mr-md-3"},"Login")),r.a.createElement(p.b,{to:"/signup"}," ",r.a.createElement("button",{type:"button",className:"btn btn-outline-light mr-md-3"},"Signup"))),r.a.createElement("div",null,r.a.createElement("h1",null," Imagen Logo")))}}]),t}(n.Component),F=(a(99),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).travelService=new g,a.state={allCircuits:[],filteredCircuits:[]},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getAllCircuits",value:function(){var e=this;this.travelService.all().then(function(t){e.setState(Object(l.a)({},e.state,{allCircuits:t,filteredCircuits:t}))})}},{key:"getUserCircuits",value:function(e){var t=this;this.travelService.circuitsWithUSer(e).then(function(e){t.setState(Object(l.a)({},t.state,{allCircuits:e,filteredCircuits:e}))})}},{key:"componentDidMount",value:function(){this.props.id?this.getUserCircuits(this.props.id):this.getAllCircuits()}},{key:"filterCircuit",value:function(e){var t=Object(f.a)(this.state.filteredCircuits);0===e.length||0===t.length?this.setState(Object(l.a)({},this.state,{filteredCircuits:this.state.allCircuits})):this.setState(Object(l.a)({},this.state,{filteredCircuits:t.filter(function(t){return t.title.toLowerCase().includes(e.toLowerCase())})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(E,{search:function(t){return e.filterCircuit(t)}})),r.a.createElement("div",{className:"boxMovie  "},this.state.filteredCircuits.map(function(e,t){return r.a.createElement("div",{key:t,className:"card",style:{width:280}},r.a.createElement("div",null,r.a.createElement("img",{alt:"",className:"card-img-top",src:e.image_url})),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title text-center"}," ",e.title),r.a.createElement(p.b,{id:"btn",className:"btn btn-secondary",to:"/circuit/".concat(e._id)},"Circuit")))})))}}]),t}(n.Component)),L=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).AuthService=new N,a.state={userData:null},a.getOneCreator(),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getOneCreator",value:function(){var e=this,t=this.props.match.params.id;this.AuthService.oneData(t).then(function(t){e.setState(Object(l.a)({},e.state,{userData:t}))})}},{key:"render",value:function(){return null===this.state.userData?r.a.createElement("div",null,r.a.createElement("h1",null,"LOADING...")):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"creatorContainer"},r.a.createElement("img",{src:this.state.userData.img,alt:""}),r.a.createElement("h1",null,this.state.userData.username)),r.a.createElement("div",{className:"circuitsUserContainer"},r.a.createElement(F,{id:this.props.match.params.id})))}}]),t}(n.Component),A=(a(100),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(o.a)(this,Object(m.a)(t).call(this))).state={data:{},created:!1,creator_id:""},e.Services=new g,e}return Object(d.a)(t,e),Object(u.a)(t,[{key:"dataUpdate",value:function(e,t){this.setState(Object(l.a)({},this.state,{data:Object(l.a)({},this.state.data,Object(j.a)({},t,e))}))}},{key:"create",value:function(e){var t=this;e.preventDefault(),this.Services.newOne(Object(l.a)({},this.state.data,{creator_id:this.props.user._id})).then(function(e){t.setState(Object(l.a)({},t.state,{created:!0,creator_id:e.data._id}))})}},{key:"render",value:function(){var e=this,t=this.state.data;return this.state.created?r.a.createElement(h.a,{to:{pathname:"/allCircuits"}}):r.a.createElement("div",{className:"formCont"},r.a.createElement("h2",null," Create new Circuit"),r.a.createElement("form",{className:"extendedCardEdit",onSubmit:function(t){return e.create(t)}},r.a.createElement("input",{className:"top",type:"text",placeholder:"Title",value:t.title,onChange:function(t){return e.dataUpdate(t.target.value,"title")}}),r.a.createElement("textarea",{className:"top",placeholder:"Descriptions",onChange:function(t){return e.dataUpdate(t.target.value,"descriptions")}}),r.a.createElement("input",{className:"top",type:"text",placeholder:"Image url",value:t.image_url,onChange:function(t){return e.dataUpdate(t.target.value,"image_url")}}),r.a.createElement("button",{id:"btn_create",className:"btn btn-secondary",type:"submit"},"Create ")))}}]),t}(n.Component)),M=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).getUser=function(e){a.setState(Object(l.a)({},a.state,{loggedInUser:e}))},a.logout=function(){a.service.logout().then(function(){a.setState({loggedInUser:null})})},a.state={loggedInUser:null},a.service=new N,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"fetchUser",value:function(){var e=this;if(null===this.state.loggedInUser)return this.service.loggedin().then(function(t){e.setState(Object(l.a)({},e.state,{loggedInUser:t}))}).catch(function(t){e.setState({loggedInUser:!1})})}},{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"render",value:function(){var e=this;return this.state.loggedInUser?r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{logoutFunction:this.logout}),r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/allCircuits",component:C}),r.a.createElement(h.b,{exact:!0,path:"/circuit/:id",component:I}),r.a.createElement(h.b,{exact:!0,path:"/creator/:id",component:L}),r.a.createElement(h.b,{exact:!0,path:"/new",render:function(t){return r.a.createElement(A,Object.assign({},t,{user:e.state.loggedInUser}))}}),")}/>")):r.a.createElement("div",{className:"App"},r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/",component:_}),r.a.createElement(h.b,{exact:!0,path:"/signup",render:function(t){return r.a.createElement(w,Object.assign({},t,{getUser:function(){return e.getUser()}}))}}),r.a.createElement(h.b,{exact:!0,path:"/login",render:function(t){return r.a.createElement(k,Object.assign({},t,{getUser:e.getUser}))}})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(101);c.a.render(r.a.createElement(p.a,null,r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},30:function(e,t,a){},32:function(e,t,a){},43:function(e,t,a){e.exports=a(102)},48:function(e,t,a){},49:function(e,t,a){},69:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},99:function(e,t,a){}},[[43,1,2]]]);
//# sourceMappingURL=main.e70e8413.chunk.js.map